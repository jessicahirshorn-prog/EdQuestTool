<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Learning Scenario: Scientific Method in Research</title>
<style>
tw-story {
    font-family: Georgia, serif;
    font-size: 18px;
    line-height: 1.6;
    max-width: 800px;
    margin: 0 auto;
    padding: 20px;
}
tw-passage {
    display: block;
}
tw-link, tw-link:link, tw-link:visited {
    color: #4a90d9;
    text-decoration: none;
    cursor: pointer;
}
tw-link:hover {
    text-decoration: underline;
}
.score-display {
    position: fixed;
    top: 20px;
    right: 20px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 12px 20px;
    border-radius: 10px;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    font-size: 14px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    z-index: 1000;
}
.score-display .score-label {
    font-size: 11px;
    opacity: 0.9;
    text-transform: uppercase;
    letter-spacing: 1px;
}
.score-display .score-value {
    font-size: 24px;
    font-weight: bold;
}
.score-display .score-total {
    font-size: 14px;
    opacity: 0.8;
}
.results-box {
    background: linear-gradient(135deg, #f5f7fa 0%, #e4e8ec 100%);
    border-radius: 12px;
    padding: 24px;
    margin: 20px 0;
    border: 1px solid #ddd;
}
.results-box.passed {
    background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
    border-color: #28a745;
}
.results-box.failed {
    background: linear-gradient(135deg, #f8d7da 0%, #f5c6cb 100%);
    border-color: #dc3545;
}
.results-score {
    font-size: 48px;
    font-weight: bold;
    text-align: center;
    margin-bottom: 10px;
}
.results-box.passed .results-score {
    color: #28a745;
}
.results-box.failed .results-score {
    color: #dc3545;
}
.results-status {
    text-align: center;
    font-size: 20px;
    font-weight: 600;
    margin-bottom: 20px;
}
.results-breakdown {
    margin-top: 20px;
}
.results-breakdown h4 {
    margin-bottom: 12px;
    color: #333;
}
.concept-result {
    display: flex;
    justify-content: space-between;
    padding: 8px 12px;
    background: rgba(255,255,255,0.7);
    border-radius: 6px;
    margin-bottom: 6px;
}
.concept-result.correct {
    border-left: 4px solid #28a745;
}
.concept-result.incorrect {
    border-left: 4px solid #dc3545;
}
.concept-result.pending {
    border-left: 4px solid #6c757d;
    opacity: 0.6;
}
</style>
</head>
<body>
<tw-storydata name="Learning Scenario: Scientific Method in Research" startnode="1" creator="TwineGenerator"
creator-version="1.0.0" ifid="DD107C3D-7296-405E-A7D2-10359720755C" zoom="1" format="Harlowe" format-version="3.3.9"
options="" tags="" hidden>
<style role="stylesheet" id="twine-user-stylesheet" type="text/twine-css"></style>
<script role="script" id="twine-user-script" type="text/twine-javascript"></script>
<tw-passagedata pid="1" name="Start" tags="" position="100,100" size="100,100">Welcome to this learning scenario about **Scientific Method in Research**.

**Learning Objectives:**
â€¢ Identify the steps of the scientific method
â€¢ Formulate testable hypotheses from observations
â€¢ Design controlled experiments with appropriate variables
â€¢ Analyze data and draw evidence-based conclusions

You will encounter situations where you need to apply your understanding of these concepts. Your choices will demonstrate your grasp of the material.

**Grading:**
â€¢ Observation and Question Formation: 15 points
â€¢ Hypothesis Development: 20 points
â€¢ Experimental Design and Variables: 25 points
â€¢ Data Analysis and Conclusion: 40 points

**Total Points Available:** 100
**Passing Score:** 70% (70 points)

**Assessment Criteria:** Students should demonstrate the ability to apply each step of the scientific method to a novel research scenario, making choices that reflect systematic, evidence-based reasoning rather than assumptions or shortcuts.

[[Begin the scenario-&gt;Scenario 1]]</tw-passagedata>
<tw-passagedata pid="2" name="Scenario 1" tags="" position="100,250" size="100,100">**Scenario 1: Applying &quot;Observation and Question Formation&quot;** (15 points)

You encounter a situation that requires you to demonstrate your understanding of this concept.

Consider what you know about observation and question formation and how it applies in the context of scientific method in research.

What approach would best demonstrate understanding of this concept?

[[Apply Observation and Question Formation correctly-&gt;Correct 1]]
[[Take an alternative approach-&gt;Incorrect 1]]
[[I need to review this concept-&gt;Review 1]]</tw-passagedata>
<tw-passagedata pid="3" name="Correct 1" tags="correct understanding concept-1" position="100,400" size="100,100">**Excellent work!** âœ“ **+15 points**

You&#x27;ve demonstrated a solid understanding of **Observation and Question Formation**.

Your approach shows that you can apply this concept effectively within the context of scientific method in research.

This aligns with the learning objective: *Identify the steps of the scientific method*

[[Continue-&gt;Scenario 2]]</tw-passagedata>
<tw-passagedata pid="4" name="Incorrect 1" tags="incorrect feedback concept-1" position="100,550" size="100,100">**Let&#x27;s reconsider this approach.** (No points awarded)

The alternative approach you chose doesn&#x27;t fully demonstrate understanding of **Observation and Question Formation**.

**Feedback:** When working with observation and question formation, it&#x27;s important to consider how it connects to the broader context of scientific method in research.

**Key insight:** Observation and Question Formation requires you to consider both the theoretical principles and their practical implications.

Would you like to try again or review the concept?

[[Try again with new understanding-&gt;Scenario 1]]
[[Review the concept first-&gt;Review 1]]
[[Skip and continue-&gt;Scenario 2]]</tw-passagedata>
<tw-passagedata pid="5" name="Review 1" tags="review remediation" position="100,700" size="100,100">**Concept Review: Observation and Question Formation**

Let&#x27;s take a moment to review this important concept.

In the context of scientific method in research, **Observation and Question Formation** involves:

â€¢ Understanding the fundamental principles
â€¢ Recognizing when and how to apply them
â€¢ Connecting theory to practical situations

**Related Learning Objective:** *Identify the steps of the scientific method*

**Points available:** 15

Take your time to reflect on this before continuing.

[[Return to the scenario-&gt;Scenario 1]]</tw-passagedata>
<tw-passagedata pid="6" name="Scenario 2" tags="" position="100,850" size="100,100">**Scenario 2: Applying &quot;Hypothesis Development&quot;** (20 points)

You encounter a situation that requires you to demonstrate your understanding of this concept.

Consider what you know about hypothesis development and how it applies in the context of scientific method in research.

What approach would best demonstrate understanding of this concept?

[[Apply Hypothesis Development correctly-&gt;Correct 2]]
[[Take an alternative approach-&gt;Incorrect 2]]
[[I need to review this concept-&gt;Review 2]]</tw-passagedata>
<tw-passagedata pid="7" name="Correct 2" tags="correct understanding concept-2" position="100,1000" size="100,100">**Excellent work!** âœ“ **+20 points**

You&#x27;ve demonstrated a solid understanding of **Hypothesis Development**.

Your approach shows that you can apply this concept effectively within the context of scientific method in research.

This aligns with the learning objective: *Formulate testable hypotheses from observations*

[[Continue-&gt;Scenario 3]]</tw-passagedata>
<tw-passagedata pid="8" name="Incorrect 2" tags="incorrect feedback concept-2" position="100,1150" size="100,100">**Let&#x27;s reconsider this approach.** (No points awarded)

The alternative approach you chose doesn&#x27;t fully demonstrate understanding of **Hypothesis Development**.

**Feedback:** When working with hypothesis development, it&#x27;s important to consider how it connects to the broader context of scientific method in research.

**Key insight:** Hypothesis Development requires you to consider both the theoretical principles and their practical implications.

Would you like to try again or review the concept?

[[Try again with new understanding-&gt;Scenario 2]]
[[Review the concept first-&gt;Review 2]]
[[Skip and continue-&gt;Scenario 3]]</tw-passagedata>
<tw-passagedata pid="9" name="Review 2" tags="review remediation" position="100,1300" size="100,100">**Concept Review: Hypothesis Development**

Let&#x27;s take a moment to review this important concept.

In the context of scientific method in research, **Hypothesis Development** involves:

â€¢ Understanding the fundamental principles
â€¢ Recognizing when and how to apply them
â€¢ Connecting theory to practical situations

**Related Learning Objective:** *Formulate testable hypotheses from observations*

**Points available:** 20

Take your time to reflect on this before continuing.

[[Return to the scenario-&gt;Scenario 2]]</tw-passagedata>
<tw-passagedata pid="10" name="Scenario 3" tags="" position="100,1450" size="100,100">**Scenario 3: Applying &quot;Experimental Design and Variables&quot;** (25 points)

You encounter a situation that requires you to demonstrate your understanding of this concept.

Consider what you know about experimental design and variables and how it applies in the context of scientific method in research.

What approach would best demonstrate understanding of this concept?

[[Apply Experimental Design and Variables correctly-&gt;Correct 3]]
[[Take an alternative approach-&gt;Incorrect 3]]
[[I need to review this concept-&gt;Review 3]]</tw-passagedata>
<tw-passagedata pid="11" name="Correct 3" tags="correct understanding concept-3" position="100,1600" size="100,100">**Excellent work!** âœ“ **+25 points**

You&#x27;ve demonstrated a solid understanding of **Experimental Design and Variables**.

Your approach shows that you can apply this concept effectively within the context of scientific method in research.

This aligns with the learning objective: *Design controlled experiments with appropriate variables*

[[Continue-&gt;Scenario 4]]</tw-passagedata>
<tw-passagedata pid="12" name="Incorrect 3" tags="incorrect feedback concept-3" position="100,1750" size="100,100">**Let&#x27;s reconsider this approach.** (No points awarded)

The alternative approach you chose doesn&#x27;t fully demonstrate understanding of **Experimental Design and Variables**.

**Feedback:** When working with experimental design and variables, it&#x27;s important to consider how it connects to the broader context of scientific method in research.

**Key insight:** Experimental Design and Variables requires you to consider both the theoretical principles and their practical implications.

Would you like to try again or review the concept?

[[Try again with new understanding-&gt;Scenario 3]]
[[Review the concept first-&gt;Review 3]]
[[Skip and continue-&gt;Scenario 4]]</tw-passagedata>
<tw-passagedata pid="13" name="Review 3" tags="review remediation" position="100,1900" size="100,100">**Concept Review: Experimental Design and Variables**

Let&#x27;s take a moment to review this important concept.

In the context of scientific method in research, **Experimental Design and Variables** involves:

â€¢ Understanding the fundamental principles
â€¢ Recognizing when and how to apply them
â€¢ Connecting theory to practical situations

**Related Learning Objective:** *Design controlled experiments with appropriate variables*

**Points available:** 25

Take your time to reflect on this before continuing.

[[Return to the scenario-&gt;Scenario 3]]</tw-passagedata>
<tw-passagedata pid="14" name="Scenario 4" tags="" position="100,2050" size="100,100">**Scenario 4: Applying &quot;Data Analysis and Conclusion&quot;** (40 points)

You encounter a situation that requires you to demonstrate your understanding of this concept.

Consider what you know about data analysis and conclusion and how it applies in the context of scientific method in research.

What approach would best demonstrate understanding of this concept?

[[Apply Data Analysis and Conclusion correctly-&gt;Correct 4]]
[[Take an alternative approach-&gt;Incorrect 4]]
[[I need to review this concept-&gt;Review 4]]</tw-passagedata>
<tw-passagedata pid="15" name="Correct 4" tags="correct understanding concept-4" position="100,2200" size="100,100">**Excellent work!** âœ“ **+40 points**

You&#x27;ve demonstrated a solid understanding of **Data Analysis and Conclusion**.

Your approach shows that you can apply this concept effectively within the context of scientific method in research.

This aligns with the learning objective: *Analyze data and draw evidence-based conclusions*

[[Continue-&gt;Results]]</tw-passagedata>
<tw-passagedata pid="16" name="Incorrect 4" tags="incorrect feedback concept-4" position="100,2350" size="100,100">**Let&#x27;s reconsider this approach.** (No points awarded)

The alternative approach you chose doesn&#x27;t fully demonstrate understanding of **Data Analysis and Conclusion**.

**Feedback:** When working with data analysis and conclusion, it&#x27;s important to consider how it connects to the broader context of scientific method in research.

**Key insight:** Data Analysis and Conclusion requires you to break down complex information into components and examine relationships.

Would you like to try again or review the concept?

[[Try again with new understanding-&gt;Scenario 4]]
[[Review the concept first-&gt;Review 4]]
[[Skip and continue-&gt;Results]]</tw-passagedata>
<tw-passagedata pid="17" name="Review 4" tags="review remediation" position="100,2500" size="100,100">**Concept Review: Data Analysis and Conclusion**

Let&#x27;s take a moment to review this important concept.

In the context of scientific method in research, **Data Analysis and Conclusion** involves:

â€¢ Understanding the fundamental principles
â€¢ Recognizing when and how to apply them
â€¢ Connecting theory to practical situations

**Related Learning Objective:** *Analyze data and draw evidence-based conclusions*

**Points available:** 40

Take your time to reflect on this before continuing.

[[Return to the scenario-&gt;Scenario 4]]</tw-passagedata>
<tw-passagedata pid="18" name="Results" tags="ending results" position="100,2650" size="100,100">**Scenario Complete: Scientific Method in Research**

{RESULTS_BOX}

**Assessment Criteria:** Students should demonstrate the ability to apply each step of the scientific method to a novel research scenario, making choices that reflect systematic, evidence-based reasoning rather than assumptions or shortcuts.

[[Try again-&gt;Start]]</tw-passagedata>
</tw-storydata>
<script>
const GRADING_CONFIG = {"enabled": true, "conceptPoints": {"Observation and Question Formation": 15, "Hypothesis Development": 20, "Experimental Design and Variables": 25, "Data Analysis and Conclusion": 40}, "passingThreshold": 70, "totalPoints": 100, "passingPoints": 70};

(function() {
    const storyData = document.querySelector('tw-storydata');
    const passages = {};

    // Parse all passages
    storyData.querySelectorAll('tw-passagedata').forEach(p => {
        passages[p.getAttribute('name')] = {
            pid: p.getAttribute('pid'),
            content: p.textContent,
            tags: (p.getAttribute('tags') || '').split(' ').filter(t => t)
        };
    });

    const startNode = storyData.getAttribute('startnode');
    let startPassage = null;

    for (const [name, data] of Object.entries(passages)) {
        if (data.pid === startNode) {
            startPassage = name;
            break;
        }
    }

    // Grading state
    const grading = {
        enabled: typeof GRADING_CONFIG !== 'undefined' && GRADING_CONFIG.enabled,
        config: typeof GRADING_CONFIG !== 'undefined' ? GRADING_CONFIG : {},
        score: 0,
        conceptResults: {},  // concept name -> {correct: bool, points: number, attempts: number}
        initialized: false
    };

    // Initialize grading
    if (grading.enabled) {
        for (const [concept, points] of Object.entries(grading.config.conceptPoints || {})) {
            grading.conceptResults[concept] = { correct: false, points: points, attempts: 0, answered: false };
        }
    }

    // Create score display
    let scoreDisplay = null;
    if (grading.enabled) {
        scoreDisplay = document.createElement('div');
        scoreDisplay.className = 'score-display';
        scoreDisplay.innerHTML = `
            <div class="score-label">Current Score</div>
            <div><span class="score-value">0</span><span class="score-total"> / ${grading.config.totalPoints}</span></div>
        `;
        document.body.appendChild(scoreDisplay);
    }

    function updateScoreDisplay() {
        if (scoreDisplay) {
            scoreDisplay.querySelector('.score-value').textContent = grading.score;
        }
    }

    // Extract concept number from passage name (e.g., "Correct 1" -> 1)
    function getConceptFromPassage(passageName) {
        const match = passageName.match(/(Correct|Incorrect)\s+(\d+)/);
        if (match) {
            const num = parseInt(match[2]);
            const concepts = Object.keys(grading.config.conceptPoints || {});
            if (num <= concepts.length) {
                return { concept: concepts[num - 1], isCorrect: match[1] === 'Correct' };
            }
        }
        return null;
    }

    // Create story container
    const storyEl = document.createElement('tw-story');
    document.body.appendChild(storyEl);

    function showPassage(name) {
        const passage = passages[name];
        if (!passage) {
            storyEl.innerHTML = '<p>Error: Passage not found: ' + name + '</p>';
            return;
        }

        // Handle grading for correct/incorrect passages
        if (grading.enabled) {
            const conceptInfo = getConceptFromPassage(name);
            if (conceptInfo && grading.conceptResults[conceptInfo.concept]) {
                const result = grading.conceptResults[conceptInfo.concept];
                result.attempts++;

                // Only award points on first correct answer
                if (conceptInfo.isCorrect && !result.answered) {
                    result.correct = true;
                    result.answered = true;
                    grading.score += result.points;
                    updateScoreDisplay();
                } else if (!conceptInfo.isCorrect && !result.answered) {
                    result.answered = false;  // Allow retry
                }
            }
        }

        // Parse content and convert links
        let content = passage.content;

        // Handle special Results passage
        if (name === 'Results' && grading.enabled) {
            content = generateResultsContent();
        }

        // Convert [[text->target]] links
        content = content.replace(/\[\[([^\]]+)->([^\]]+)\]\]/g, (match, text, target) => {
            return `<tw-link data-target="${target}">${text}</tw-link>`;
        });

        // Convert [[target]] links
        content = content.replace(/\[\[([^\]]+)\]\]/g, (match, target) => {
            return `<tw-link data-target="${target}">${target}</tw-link>`;
        });

        // Replace score placeholders
        if (grading.enabled) {
            content = content.replace(/\{SCORE\}/g, grading.score);
            content = content.replace(/\{TOTAL\}/g, grading.config.totalPoints);
            content = content.replace(/\{PERCENTAGE\}/g, Math.round((grading.score / grading.config.totalPoints) * 100));
            content = content.replace(/\{PASSING\}/g, grading.config.passingThreshold);
            content = content.replace(/\{RESULTS_BOX\}/g, generateResultsBox());
        }

        // Convert newlines to paragraphs
        content = content.split('\n\n').map(p => '<p>' + p.replace(/\n/g, '<br>') + '</p>').join('');

        const passageEl = document.createElement('tw-passage');
        passageEl.innerHTML = content;

        storyEl.innerHTML = '';
        storyEl.appendChild(passageEl);

        // Add click handlers for links
        passageEl.querySelectorAll('tw-link').forEach(link => {
            link.addEventListener('click', () => {
                showPassage(link.getAttribute('data-target'));
            });
        });
    }

    function generateResultsBox() {
        if (!grading.enabled) return '';

        const percentage = Math.round((grading.score / grading.config.totalPoints) * 100);
        const passed = percentage >= grading.config.passingThreshold;
        const statusClass = passed ? 'passed' : 'failed';
        const statusText = passed ? 'PASSED' : 'NEEDS IMPROVEMENT';
        const statusEmoji = passed ? 'ðŸŽ‰' : 'ðŸ“š';

        let conceptBreakdown = '';
        for (const [concept, result] of Object.entries(grading.conceptResults)) {
            const statusClass = result.correct ? 'correct' : (result.attempts > 0 ? 'incorrect' : 'pending');
            const icon = result.correct ? 'âœ“' : (result.attempts > 0 ? 'âœ—' : 'â—‹');
            const pointsText = result.correct ? `+${result.points}` : '0';
            conceptBreakdown += `
                <div class="concept-result ${statusClass}">
                    <span>${icon} ${concept}</span>
                    <span>${pointsText} pts</span>
                </div>
            `;
        }

        return `
            <div class="results-box ${statusClass}">
                <div class="results-score">${percentage}%</div>
                <div class="results-status">${statusEmoji} ${statusText}</div>
                <div><strong>Score:</strong> ${grading.score} / ${grading.config.totalPoints} points</div>
                <div><strong>Passing threshold:</strong> ${grading.config.passingThreshold}%</div>
                <div class="results-breakdown">
                    <h4>Concept Breakdown:</h4>
                    ${conceptBreakdown}
                </div>
            </div>
        `;
    }

    function generateResultsContent() {
        return `**Your Results**\n\n{RESULTS_BOX}`;
    }

    // Reset function for starting over
    window.resetScenario = function() {
        grading.score = 0;
        for (const concept of Object.keys(grading.conceptResults)) {
            grading.conceptResults[concept] = {
                correct: false,
                points: grading.conceptResults[concept].points,
                attempts: 0,
                answered: false
            };
        }
        updateScoreDisplay();
        showPassage(startPassage);
    };

    if (startPassage) {
        showPassage(startPassage);
    }
})();

</script>
</body>
</html>